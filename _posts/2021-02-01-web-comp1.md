---
layout: post
title:  "TEI Publisher | pb-view"
date:   2021-02-01 16:10 +0100
categories: tei-publihser
---

#### Displaying a xml file with the TEI Publisher web component.  
The `pb-page` tag contains the path to the original document, the navigation and the viewer. It is HTML.  
At the moment, the styling is included directly in the `<head>`. An external slylesheet can be applied if the `load-css` property is set in the `pb-view`. In that case, the externat stylesheet would be applied _after the ODD generated styles._  
  
Styling the viewer's footer will conflict with the website's footer so I removed the styling, which doesn't make a big difference since the navigation is on the upper side of the viewer.

This is where I got the base code: [an example on how to embed TEI content into a static website using markdown](https://teipublisher.onrender.com/post/embedding-publisher/) and it works fine with the given example. 
I tried working on one of our transcription and uploaded it to Tei Publisher's palyground.
When changing the document to display by changing the path to `pb-document path="playground/new_document.xml"` it fails and return a server error:
```
the server did not return any content
The request to the server failed.: The request to the server failed.
```
It is the same error that appears in the TEI Publisher's example.  
The file provided as a demo do not return any server error.
See [issue #48](https://github.com/DCMLab/ddd/issues/48) for more informations.
  
#### How to set the odd in `pb-document odd=""`:  
- go on the [TEI Publisher page](https://teipublisher.com/exist/apps/tei-publisher/index.html?tab=0)
- on the right, click on the odd
- the odd's filename is on the top left
> do not include the .odd extension, only the name  

***  

The code below works one codepen and works here when using Kant's demo file.

<br>


<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, minimum-scale=1, initial-scale=1, user-scalable=yes" />
    <title>pb-view Demo</title>
    <script src="https://unpkg.com/@webcomponents/webcomponentsjs@2.4.3/webcomponents-loader.js"></script>
    <script type="module" src="https://unpkg.com/@teipublisher/pb-components@latest/dist/pb-components-bundle.js">
    </script>
    <style>
        pb-page {
            position: relative;
        }
        pb-view {
            margin-left: 25%;
        }
        #view1 {
            overflow: auto;
            display: flex;
            justify-content: center;
            max-height: calc(100vh - 100px);
        }
        @media (min-width: 769px) {
            pb-view {
                max-width: 60vw;
            }
        }
        pb-navigation[direction="forward"] {
            float: right;
            color: green;
        }
        /* Color of navigation */
        paper-fab{
            background: lightsteelblue;
        }
        paper-fab:hover{
            background: steelblue;
        }
        </style>
</head>
<body>
    <pb-page endpoint="https://teipublisher.com/exist/apps/tei-publisher" emit="kant" class="embedded">
        <!-- Load document -->
        <pb-document id="doc1" path="playground/Die_Natur_der_Harmonik_und_der_Metrik-01_teicopy.xml" odd="melinda-dodis"></pb-document>
        <!-- Navigate to next page // not in footer not to mess with site's footer, before pb-view to be on top // -->
        <pb-navigation direction="forward" keyboard="right">
            <paper-fab icon="icons:chevron-right"></paper-fab>
        </pb-navigation>
        <!-- Navigate to previous page -->
        <pb-navigation direction="backward" keyboard="left">
            <paper-fab icon="icons:chevron-left"></paper-fab>
        </pb-navigation>
        <pb-view src="doc1" xpath="//teiHeader/fileDesc/titleStmt/title">
            <pb-param name="header" value="short"></pb-param>
        </pb-view>
        <pb-view class="transcription" src="doc1" view="page"></pb-view>
    </pb-page>
</body>

